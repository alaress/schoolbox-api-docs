post:
  operationId: assessment.postFeedback
  tags: [assessment]
  summary: Create feedback for due work
  description: |
    Add marks and comments to an assessment. Can be draft or published based on the publish flag. 
    Use the responseId to indicate the feedback is in relation to a student submission, this field is optional.
  responses:
    '200':
      description: Successfully created feedback for the assessment.
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: true
              message:
                type: string
                example: "OK"
              id:
                type: integer
    default:
      $ref: ../components/responses/problem.yaml
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          properties:
            responseId:
              type: integer
              description: The ID of the student submission this feedback relates to (optional)
              example: 12345
            mark:
              oneOf:
                - type: number
                - type: string
              description: |
                The mark/grade to assign (can be numeric or string format).
                Valid formats include:
                - Letter grades: "A+", "B-", "C"
                - Status indicators: "Absent", "Incomplete"
                - Numeric values: 95, 87.5
                - Percentage strings: "67 %", "85%"
                - Fraction strings: "5/10", "18/20"
              example: "A+"
            comment:
              type: string
              description: Feedback comment
              example: "Excellent work! Your analysis was thorough and well-structured."
            publish:
              type: integer
              description: Whether to publish the feedback (1) or keep as draft (0)
              enum: [0, 1]
              example: 1
  parameters:
    - name: assessmentId
      in: path
      required: true
      description: The ID of the assessment
      schema:
        type: integer
        example: 123
    - name: studentId
      in: path
      required: true
      description: The ID of the student
      schema:
        type: integer
        example: 456
