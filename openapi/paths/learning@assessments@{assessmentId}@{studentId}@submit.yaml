post:
  operationId: assessment.postSubmission
  tags: [assessment]
  summary: Create due work submission
  description: |
    Allow the uploading of a student submission to an assessment item for a particular student. 
    If submitted by a user other than the student it will appear as submitted on behalf of. 
    When attaching files they should first be uploaded, using the file upload endpoint, then the reference can be used in this payload. 
    All fields are optional, but at least one field must be supplied.
  responses:
    '200':
      description: Successfully created submission for the assessment.
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: true
              message:
                type: string
                example: "OK"
              id:
                type: integer
                description: The ID of the created submission
                example: 102
    default:
      $ref: ../components/responses/problem.yaml
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          properties:
            body:
              type: string
              description: HTML content of the submission
              example: "<p>This is my submission for the assessment.</p>"
            attachment:
              type: array
              description: Array of file references that were previously uploaded
              items:
                type: string
                example: "store:69f7efd490dd7679b105c21d1b00c3a84f8ba376:filename.doc"
          minProperties: 1
          additionalProperties: false
  parameters:
    - name: assessmentId
      in: path
      required: true
      description: The ID of the assessment
      schema:
        type: integer
        example: 123
    - name: studentId
      in: path
      required: true
      description: The ID of the student
      schema:
        type: integer
        example: 456
